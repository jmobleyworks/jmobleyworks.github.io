<!DOCTYPE html>
<body>
  <img id="forest" src="Forest (2).png" style="display: none;">
  <canvas id="canvas" style="border: 1px solid black;"></canvas>
  <p id="detectedColor" style="font-family: sans-serif; width:50px;height:50px;border:1px solid black;margin:10px;"></p>
  <script>
    var tolerance = 10, numSamples = 100, image = document.getElementById('forest'), canvas = document.getElementById('canvas'),detectedColorDiv = document.getElementById('detectedColor'), ctx = canvas.getContext('2d'), backgroundColor = null, seeds = []; 
    let isForeground = (testColor) => { return Math.abs(testColor[0] - backgroundColor[0]) > tolerance || Math.abs(testColor[1] - backgroundColor[1]) > tolerance ||Math.abs(testColor[2] - backgroundColor[2]) > tolerance }
    //let floodFill = (x, y, oldColor, newColor) => { if (isForeground(ctx.getImageData(x, y, 1, 1).data)) { ctx.fillStyle = newColor; ctx.fillRect(x, y, 1, 1); floodFill(x + 1, y, oldColor, newColor); floodFill(x - 1, y, oldColor, newColor); floodFill(x, y + 1, oldColor, newColor); floodFill(x, y - 1, oldColor, newColor); } }
    document.getElementById('forest').onload = function() {
      canvas.width = image.width;
      canvas.height = image.height;
      ctx.drawImage(image, 0, 0); // Draw image onto canvas (hidden)
      backgroundColor =  `rgb(${ ctx.getImageData(0, 0, 1, 1).data[0]}, ${ ctx.getImageData(0, 0, 1, 1).data[1]}, ${ ctx.getImageData(0, 0, 1, 1).data[3]})`;
      detectedColorDiv.style.backgroundColor =  backgroundColor;
      const testColor = [255, 0, 0]; 
      var testIsForeground = isForeground(testColor);
      console.log(testIsForeground);
    };
    //function getRandomForegroundSeeds(canvas, isForeground, numSamples) {
    //  return Array.from({ length: numSamples })
    //    .map(() => ({ x: Math.floor(Math.random() * canvas.width), y: Math.floor(Math.random() * canvas.height) }))
    //    .filter(point => isForeground(ctx.getImageData(point.x, point.y, 1, 1).data));
    //}
    //seeds = getRandomForegroundSeeds(canvas, isForeground, numSamples);
    //console.log("seeds.length="+seeds.length);

  </script>
</body>
</html>
