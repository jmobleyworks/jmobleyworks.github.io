<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GameSeed WorldBuilder Control</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>GameSeed WorldBuilder Control</h1>
  </header>
  <main>
    <p>Welcome! This tool helps generate world seeds for games.</p>
    <h2>What is it?</h2>
    <p>The GameSeed WorldBuilder Control lets you create custom world seeds by selecting options from various categories.</p>
    <section id="demonstration">
      <h2>Demonstration</h2>
      <p>Follow these steps to use the tool and generate your world seed:</p>
      <h3>Step-by-Step Example</h3>
      <h4>1. Generating World Seed</h4>
      <p>Use the interactive form below to customize your world seed:</p>
      <div id="gameSeedWorldBuilderControl"></div>
    </section>
  </main>
  <script>
    const options = {}, timePeriods = ["Ancient", "Medieval", "Renaissance"], themes = ["Ancient", "Medieval", "Renaissance"]; // ... (shortened gameDesignChoices)...
      createGroup = (c, choices) => (g => (l = document.createElement('label')).textContent = c.charAt(0).toUpperCase() + c.slice(1), g.appendChild(l), (o = document.createElement('div')).classList.add('options'), g.appendChild(o), choices.forEach(choice => {
        const option = document.createElement('div');
        option.classList.add('option');
        option.innerText = choice;
        option.classList.add('selected', choice === timePeriods[0]); // Assuming default is first option
        option.addEventListener('click', () => updateOption(c, option)), o.appendChild(option)
      }), g)(document.createElement('div')).classList.add('form-group'),
      updateOption = (category, element) => element instanceof Element && (choices = options[category] || [], element.classList.toggle('selected'), choices[element.classList.contains('selected') ? 'push' : 'splice'](choices.indexOf(element.innerText), 1), options[category] = [...new Set(choices)], updatePrompts()),
      formatOptions = options => Array.isArray(options) && options.length > 0 ? options.length === 1 ? options[0] : `${options.join(', ')} and ${options.pop()}` : "**No Options Available**",
      shortPrompt = worldSeed => `Design a 2D action RPG with the following elements: Set in ${formatOptions(worldSeed.timePeriod)} ${formatOptions(worldSeed.theme)} world with a ${formatOptions(worldSeed.atmosphere)} atmosphere. The environment features ${formatOptions(worldSeed.environment)} ${formatOptions(worldSeed.location)} adorned with ${formatOptions(worldSeed.landmarks)}. Inhabited by ${formatOptions(worldSeed.inhabitants)}, the world faces ${formatOptions(worldSeed.conflict)} influenced by ${formatOptions(worldSeed.elementalInfluence)} and ${formatOptions(worldSeed.technologyLevel)} technology. Cultural inspiration is drawn from ${formatOptions(worldSeed.culturalInfluences)} traditions, focusing on ${formatOptions(worldSeed.narrativeFocus)} narratives.`,
      updatePrompts = () => {
        const chosen = Object.assign({}, ...Object.keys(timePeriods).map(c => ({ [c]: options[c] || timePeriods[0] }))), // Assuming default is first option for all categories
          shortPromptElement = document.getElementById('short-prompt'),
          worldSeedDisplayElement = document.getElementById('worldSeedDisplay');
        shortPromptElement.innerText = shortPrompt(chosen);
        worldSeedDisplayElement.innerText = JSON.stringify(chosen, null, 2);
      };
    const getRandomOption = choices => choices[Math.floor(Math.random() * choices.length)];
    const seed = () => Object.fromEntries(Object.keys(timePeriods).map(c => [c, getRandomOption(timePeriods)])); // Assuming seed uses timePeriods
    const createForm = () => {
      const form = document.createElement('form');
      form.setAttribute('id', 'world-seed-form');
      (document.getElementById('gameSeedWorldBuilderControl') || document.body).appendChild(form);
      
      const button = document.createElement('button');
      button.innerText = 'Randomize';
      button.addEventListener('click', () => {
        options = {};
        Object.assign(options, seed());
        updateFormSelection();
        updatePrompts();
      });
      form.appendChild(button);
      Object.keys(timePeriods).forEach(category => form.appendChild(createGroup(category, timePeriods[category]))); // Assuming each category uses its choices list
      updateFormSelection = () => document.querySelectorAll('.option').forEach(option => option.classList.toggle('selected', options[option.parentElement.parentElement.querySelector('label').innerText.toLowerCase()]?.includes(option.innerText))),
      createForm();
  </script>
</body>
</html>
