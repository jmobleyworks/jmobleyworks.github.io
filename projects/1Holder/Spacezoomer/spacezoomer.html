<!DOCTYPE html><html><head><title>Space Shooter</title><style>body{margin:0;font-family:monospace}canvas{display:block}#hud{position:absolute;top:10px;left:10px;color:#fff}</style></head><body><canvas id=spaceCanvas></canvas><div id=hud>Shields: <progress id=shieldBar max=100 value=100></progress><br>Energy: <progress id=energyBar max=100 value=100></progress><br>Score: <span id=score>0></span></div><script>const c=document.getElementById("spaceCanvas"),x=c.getContext("2d");c.width=window.innerWidth;c.height=window.innerHeight;const e=1e3,t=[],a=c.width*.8,o=0,d=0,i=[],n=[],r=5;let s=0,.5,l=.8,h=0,u=!1;for(let o=0;o<e;++o)t.push({x:2*Math.random()*c.width-c.width,y:2*Math.random()*c.height-c.height,z:2*Math.random()*a,size:3*Math.random()+1});for(let o=0;o<r;++o)n.push({x:2*Math.random()*c.width-c.width,y:2*Math.random()*c.height-c.height,z:Math.random()*a,size:10,speed:Math.random()*2+1,angle:2*Math.random()*Math.PI,fireCooldown:0});document.addEventListener("keydown",e=>{const t=5;switch(e.key){case"w":m.speed+=t,m.boostersOn=!0;break;case"a":m.angle-=.1;break;case"s":m.speed-=t;break;case"d":m.angle+=.1;break;case" ":i.push({x:m.x+m.size*Math.cos(m.angle),y:m.y+m.size*Math.sin(m.angle),z:0,speed:10,size:h/10,damage:h/5,friendly:!0}),energyBar.value-=h,h=0;break}}),document.addEventListener("keyup",e=>{("w"===e.key||"s"===e.key)&&(m.boostersOn=!1)," "===e.key&&(u=!1)}),function p(){x.fillStyle="#000",x.fillRect(0,0,c.width,c.height);for(const e of t){const t=a/(a+e.z),o=c.width/2+(e.x-o)*t,d=c.height/2+(e.y-d)*t,i=e.size*t;i>0&&(x.beginPath(),x.arc(o,d,i,0,2*Math.PI),x.fillStyle="#fff",x.fill())}m.x+=m.speed*Math.cos(m.angle),m.y+=m.speed*Math.sin(m.angle),m.speed*=.98;const g=document.getElementById("shieldBar"),y=document.getElementById("energyBar");m.shield<g.max&&(m.shield=Math.min(m.shield+s,g.max)),g.value=m.shield,!u&&y.value<y.max&&(y.value=Math.min(y.value+l,y.max)),u&&(h=Math.min(h+3,y.max));for(const e of n)e.x+=e.speed*Math.cos(e.angle),e.y+=e.speed*Math.sin(e.angle),0>=e.fireCooldown&&Math.random()<.02&&(i.push({x:e.x,y:e.y,z:e.z,speed:8,size:4,friendly:!1}),e.fireCooldown=60),e.fireCooldown--;for(let e=0;e<i.length;++e){const t=i[e];t.z-=t.speed;const r=a/(a+t.z),s=c.width/2+t.x*r,l=c.height/2+t.y*r;for(const a of n)if(Math.hypot(s-a.x,l-a.y)<a.size*r+t.size&&t.friendly){n.splice(n.indexOf(a),1),i.splice(e,1),e--,s+=10;break}t.z>0&&(x.beginPath(),x.arc(s,l,t.size,0,2*Math.PI),x.fillStyle=t.friendly?"red":"yellow",x.fill())}for(const e of i)if(Math.hypot(m.x+c.width/2-e.x,m.y+c.height/2-e.y)<m.size+e.size&&!e.friendly){m.shield-=e.damage;break}i.filter(e=>e.z>0),x.save(),x.translate(c.width/2,c.height/2),x.rotate(m.angle),x.beginPath(),x.moveTo(-m.size/2,0),x.lineTo(m.size/2,0),x.lineTo(0,-m.size),x.closePath(),x.fillStyle="#fff",x.fill(),m.boostersOn&&(x.fillStyle="orange",x.fillRect(-m.size/4,5,10,15),x.fillRect(m.size/4-5,5,10,15)),x.restore(),document.getElementById("score").textContent=s,requestAnimationFrame(p)}const m={x:c.width/2,y:c.height/2,z:0,size:20,speed:0,angle:0,boostersOn:!1,shield:100};p();</script></body></html>
